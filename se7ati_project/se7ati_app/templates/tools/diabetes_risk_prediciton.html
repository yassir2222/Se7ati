{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index</title>
    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css"
      rel="stylesheet"
    />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Se7ati - AI Diabetes Risk Assessment</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        secondary: {
                            50: '#f8fafc',
                            500: '#202142',
                            900: '#0f172a',
                        }
                    },
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #202142 0%, #543fd7 100%);
        }
        
        .card-shadow {
            box-shadow: 0 10px 25px -5px rgba(32, 33, 66, 0.2);
        }
        
        .input-focus:focus {
            border-color: #543fd7;
            box-shadow: 0 0 0 3px rgba(84, 63, 215, 0.2);
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #543fd7;
            border-radius: 50%;
            cursor: pointer;
        }
    </style>
  </head>
    
<body class="bg-gray-50 font-sans">

    {% include 'includes/navbar.html' %}
    <div></div>
    {% include 'includes/sidebar.html' %}

    {% load static %}
    <!-- Header -->
    <header class="gradient-bg text-white py-6">
        <div class="container mx-auto px-6">
            <div class="flex justify-between items-center">
                <a href="/" class="flex items-center gap-3">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                    <span class="text-2xl font-bold">Se7ati</span>
                </a>
                
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-12 max-w-6xl">
        
        <!-- Hero Section -->
        <section class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-bold text-secondary-500 mb-4 ml-60">AI-Powered Diabetes Risk Assessment</h1>
            <p class="text-lg text-gray-600 max-w-3xl ml-60">
                Our advanced machine learning model analyzes your health data to provide a personalized assessment of your diabetes risk. Early detection can lead to better management and prevention.
            </p>
        </section>
        
        <!-- Two Column Layout -->
        <div class="grid md:grid-cols-1 gap-12 items-center">
            
            <!-- Prediction Form -->
            <div class="bg-white rounded-xl p-8 card-shadow ml-60">
                <h2 class="text-2xl font-semibold mb-6 text-secondary-500">Enter Your Health Data</h2>
                
                <form id="diabetes-form" class="space-y-6" method="post">
                    {% csrf_token %}
                    
                    <!-- Age Input -->
                    
                    
                    <!-- Gender Selection -->

                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="age">Age</label>
                            <input type="number" id="age" name="age" min="18" max="100" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus focus:outline-none" value="{{ age}}">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="Pregnancies">Pregnancies</label>
                            <input type="number" id="Pregnancies" name="Pregnancies" min="0" max="100" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus focus:outline-none" value="0">
                        </div>
                    </div>
                   
                    
                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="glucose">
                                Glucose Level <span class="text-xs text-gray-500">(mg/dL)</span>
                            </label>
                            <input type="number" id="glucose" name="Glucose" min="18" max="100" required 
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus focus:outline-none">
                            <input type="range" id="glucose-range" name="glucose" min="70" max="300" step="1" value="100"
                                class="w-full h-2 bg-gray-200 rounded-lg appearance-none range-slider">
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>70</span>
                                <output id="glucose-value">100</output>
                                <span>300</span>
                            </div>
                        </div>
                        
                        <!-- Blood Pressure -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="bp">
                                Blood Pressure <span class="text-xs text-gray-500">(mm Hg)</span>
                            </label>
                            <input type="number" id="bp" name="BP" min="18" max="100" required 
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus focus:outline-none">
                            <input type="range" id="bp-range" name="blood_pressure" min="70" max="200" step="1" value="120"
                                class="w-full h-2 bg-gray-200 rounded-lg appearance-none range-slider">
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>70</span>
                                <output id="bp-value">120</output>
                                <span>200</span>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-6">

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="glucose">
                                Skin Thickness <span class="text-xs text-gray-500">(mg/dL)</span>
                            </label>
                            <input type="number" id="glucose" name="Skin" min="18" max="100" required 
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus focus:outline-none">
                            
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="bmi">
                                Diabetes Pedigree Function <span class="text-xs text-gray-500"></span>
                            </label>
                            <input type="number" id="bmi" name="DPF" min="15" max="50" step="0.1" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus focus:outline-none">
                        </div>
                    </div>                   
                    
                    <div class="grid grid-cols-2 gap-6">

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="bmi">
                                BMI <span class="text-xs text-gray-500">(kg/m²)</span>
                            </label>
                            <input type="number" id="bmi" name="bmi" min="15" max="50" step="0.1" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus focus:outline-none">
                        </div>
                    
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="insulin">
                                Insulin <span class="text-xs text-gray-500">(μU/ml)</span>
                            </label>
                            <input type="number" id="insulin" name="insulin" min="0" max="900" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus focus:outline-none">
                        </div>
                    </div>
                        {% if result_pred %}
                           
                            <div class="fixed z-10 inset-0 overflow-y-auto">
                                <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
                                    <div class="fixed inset-0 transition-opacity">
                                        <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
                                    </div>
                                    <span class="hidden sm:inline-block sm:align-middle sm:h-screen"></span>
                                    <div
                                        class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
                                        <div class="sm:flex sm:items-start">
                                            

                                                {% if result_type == 'positive' %}       
                                                <div
                                                class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                                                <svg class="h-6 w-6 text-red-600" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                                </svg> 
                                                </div>
                                                {% else %}
                                                <div
                                                class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10">
                                                    <svg class="h-6 w-6 text-green-600" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                                    </svg> 
                                                 </div> 
                                                {% endif %}
                                           
                                            <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                                                <h3 class="text-lg leading-6 font-medium text-gray-900">
                                                    Result
                                                </h3>
                                                <div class="mt-2">
                                                    <p class="text-sm leading-5 text-gray-500">
                                                        {{ result_pred }}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                                            <span class="flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto">
                                                {% if result_type == 'positive' %} 
                                                <button type="button"
                                                    class="inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-red-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-red-500 focus:outline-none focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:leading-5">
                                                    Accept
                                                </button>
                                                {% else %}
                                                <button type="button"
                                                    class="inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-green-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:leading-5">
                                                    Accept
                                                </button>
                                                {% endif %}
                                            </span>
                                            <span class="mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto">
                                                <button type="button"
                                                    class="inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5">
                                                    Cancel
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                        
                        
                    
                    <!-- Submit Button -->
                    <button type="submit" class="w-full bg-secondary-500 hover:bg-secondary-600 text-white font-medium py-3 px-4 rounded-lg transition duration-200 transform hover:scale-[1.01] focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-opacity-50">
                        Assess My Risk
                    </button>
                </form>
            </div>
          
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>

    </body>
    <script>
var rangeInput = document.getElementById('glucose-range');
var currencyInput = document.getElementById('glucose');
var bprangeInput = document.getElementById('bp-range');
var bpInput = document.getElementById('bp');

// Function to update the currency input
function updateCurrencyInput() {
currencyInput.value = rangeInput.value;
}

// Add event listener to the range input
rangeInput.addEventListener('input', updateCurrencyInput);

function updatebpInput() {
    bpInput.value = bprangeInput.value;
}

// Add event listener to the range input
bprangeInput.addEventListener('input', updatebpInput);

function closeModal() {
    const modal = document.querySelector('.fixed.z-10.inset-0');
    if (modal) {
        modal.style.display = 'none';
    }
}

// Add event listeners to the modal buttons when the DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Get the Accept and Cancel buttons in the modal
    const acceptButton = document.querySelector('.mt-5.sm\\:mt-4 button');
    const cancelButton = document.querySelector('.mt-3.flex button');
    
    // Add click event listeners to both buttons
    if (acceptButton) {
        acceptButton.addEventListener('click', closeModal);
    }
    
    if (cancelButton) {
        cancelButton.addEventListener('click', closeModal);
    }
});
    </script>                    
  </body>
